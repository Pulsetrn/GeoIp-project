{"mappings":"AAAA,MAAM,MAAM,SAAS,aAAa,CAAC;AACnC,MAAM,UAAU,SAAS,aAAa,CAAC;AACvC,MAAM,SAAS,SAAS,aAAa,CAAC;AACtC,MAAM,eAAe,SAAS,aAAa,CAAC;AAC5C,MAAM,eAAe,SAAS,aAAa,CAAC;AAC5C,MAAM,UAAU,SAAS,aAAa,CAAC;AACvC,IAAI,QAAQ;AAEZ,IAAI,gBAAgB,CAAC,SAAS;AAC9B,QAAQ,gBAAgB,CAAC,WAAW;AAEpC,eAAe;IACb,YAAY,QAAQ,KAAK;IACzB,IAAI,WAAW,YAAY;QACzB,MAAM,WAAW,MAAM,MACrB,CAAC,4FAA4F,EAAE,UAAU,CAAC;QAE5G,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ;IACV;AACF;AAEA,SAAS,UAAU,KAAK;IACtB,IAAI,MAAM,GAAG,IAAI,SACf;AAEJ;AAEA,SAAS,QAAQ,IAAI;IACnB,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,KAAK,QAAQ;IACxC,OAAO,SAAS,GAAG,KAAK,EAAE;IAC1B,aAAa,SAAS,GAAG,KAAK,QAAQ,CAAC,OAAO,GAAG,MAAM,KAAK,QAAQ,CAAC,MAAM;IAC3E,aAAa,SAAS,GAAG,KAAK,QAAQ,CAAC,QAAQ;IAC/C,QAAQ,SAAS,GAAG,KAAK,GAAG;IAE5B,IAAI,UAAU,WAAW;QACvB,QAAQ,GAAG,CAAC,MAAM,UAAU;QAC5B,MAAM,SAAS,CAAC;YAAC;YAAK;SAAI;QAC1B,gBAAgB,OAAO,KAAK;IAC9B,OAAO;QACL,MAAM,KAAK,CAAC;QACZ,MAAM,SAAS,CAAC;YAAC;YAAK;SAAI;QAC1B,gBAAgB,OAAO,MAAM,KAAK;IACpC;AACF;AAEA,SAAS,WAAW,EAAE;IACpB,IACE,mKAAmK,IAAI,CACrK,KAGF,OAAO;IAET,MAAM;IACN,OAAO;AACT;AAEA,SAAS;IACP,kBAAkB;IAClB,QAAQ,IAAI,MAAM,GAAG,CAAC,OAAO;QAC3B,QAAQ;YAAC;YAAO;SAAM;QACtB,MAAM;QACN,MAAM;QACN,0BAA0B;QAC1B,wBAAwB;QACxB,UAAU,EAAE;IACd;AACF;AAEA,SAAS,gBAAgB,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG;IAC1C,IAAI,YAAY,IAAI,MAAM,SAAS,CACjC;QAAC;QAAK;KAAI,EACV;QACE,aAAa;IACf,GACA;QACE,QAAQ;QACR,oCAAoC;QACpC,oBAAoB;QACpB,4DAA4D;QAC5D,uBAAuB;IACzB;IAEF,IAAI,UAAU,CAAC,GAAG,CAAC;AACrB","sources":["source/index.js"],"sourcesContent":["const btn = document.querySelector(\"button\");\r\nconst idInput = document.querySelector(\".search-bar__input\");\r\nconst ipInfo = document.querySelector(\"#ip\");\r\nconst locationInfo = document.querySelector(\"#location\");\r\nconst timezoneInfo = document.querySelector(\"#timezone\");\r\nconst ispInfo = document.querySelector(\"#isp\");\r\nlet myMap = undefined;\r\n\r\nbtn.addEventListener(\"click\", getData);\r\nidInput.addEventListener(\"keydown\", handleKey);\r\n\r\nasync function getData() {\r\n  inputData = idInput.value;\r\n  if (validateIp(inputData)) {\r\n    const response = await fetch(\r\n      `https://geo.ipify.org/api/v2/country,city?apiKey=at_hctYzT6UtwqXjbNkZPgsO4HIXWteR&ipAddress=${inputData}`\r\n    );\r\n    const data = await response.json();\r\n    setInfo(data);\r\n  }\r\n}\r\n\r\nfunction handleKey(event) {\r\n  if (event.key == \"Enter\") {\r\n    getData();\r\n  }\r\n}\r\n\r\nfunction setInfo(data) {\r\n  const { lat, lng, city } = data.location;\r\n  ipInfo.innerText = data.ip;\r\n  locationInfo.innerText = data.location.country + \" \" + data.location.region;\r\n  timezoneInfo.innerText = data.location.timezone;\r\n  ispInfo.innerText = data.isp;\r\n  \r\n  if (myMap !== undefined) {\r\n    console.log(myMap.geoObjects)\r\n    myMap.setCenter([lat, lng]);\r\n    createPlacemark(myMap, lat, lng);\r\n  } else {\r\n    ymaps.ready(init());\r\n    myMap.setCenter([lat, lng]);\r\n    createPlacemark(myMap, city, lat, lng);\r\n  }\r\n}\r\n\r\nfunction validateIp(ip) {\r\n  if (\r\n    /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(\r\n      ip\r\n    )\r\n  ) {\r\n    return true;\r\n  }\r\n  alert(\"Input ip-adress invalid\");\r\n  return false;\r\n}\r\n\r\nfunction init() {\r\n  // Создание карты.\r\n  myMap = new ymaps.Map(\"map\", {\r\n    center: [37.64, 55.76],\r\n    zoom: 10,\r\n    type: \"yandex#satellite\",\r\n    // Карта будет создана без\r\n    // элементов управления.\r\n    controls: [],\r\n  });\r\n}\r\n\r\nfunction createPlacemark(map, city, lat, lng) {\r\n  let placemark = new ymaps.Placemark(\r\n    [lat, lng],\r\n    {\r\n      iconContent: city,\r\n    },\r\n    {\r\n      preset: \"islands#yellowStretchyIcon\",\r\n      // Отключаем кнопку закрытия балуна.\r\n      balloonCloseButton: false,\r\n      // Балун будем открывать и закрывать кликом по иконке метки.\r\n      hideIconOnBalloonOpen: false,\r\n    }\r\n  );\r\n  map.geoObjects.add(placemark);\r\n}\r\n"],"names":[],"version":3,"file":"index.f673b030.js.map","sourceRoot":"/__parcel_source_root/"}